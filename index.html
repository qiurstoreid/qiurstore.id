<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>QIURSTORE.ID</title>

<style>
/* RESET */
* {
  box-sizing: border-box;
}

/* BODY */
body {
  margin: 0;
  min-height: 100vh;
  background: #C0C0C0;
  color: #00ff00;
  font-family: monospace;
  display: flex;
  flex-direction: column; /* <<< PENTING */
  align-items: center;
  justify-content: flex-start;
  padding: 15px;
}

/* BOX */
.box {
  width: 100%;
  max-width: 520px;
  border: 2px solid #00ff00;
  padding: 22px;
  margin-bottom: 20px;
  background: black;
}

/* JUDUL */
h2 {
  text-align: center;
  margin-bottom: 12px;
}

/* TEXT */
p {
  font-size: 15px;
  text-align: center;
  line-height: 1.6;
}

/* INPUT & BUTTON */
input,
button {
  width: 100%;
  padding: 14px;
  margin-top: 12px;
  background: black;
  color: #00ff00;
  border: 1px solid #00ff00;
  font-family: monospace;
  font-size: 15px;
}

/* BUTTON */
button {
  cursor: pointer;
}

button:hover {
  background: #00ff00;
  color: black;
}

/* HIDDEN */
.hidden {
  display: none;
}

/* DATA */
.data {
  margin-top: 15px;
  border-top: 1px dashed #00ff00;
  padding-top: 15px;
}

/* ERROR */
#error {
  margin-top: 10px;
  text-align: center;
}

/* ABSEN ITEM */
.absen-item {
  margin-top: 8px;
  padding: 6px;
  border-bottom: 1px dashed #00ff00;
  font-size: 14px;
}
</style>
</head>

<body>

<!-- ================= ABSEN ================= -->
<div class="box">
  <h2>ABSEN WORKER</h2>

  <input id="namaWorker" placeholder="Nama worker">
  <input id="statusWorker" placeholder="Status (contoh: 1 done)">
  <button onclick="kirimAbsen()">KIRIM ABSEN</button>

  <div class="data" id="listAbsen"></div>
</div>

<!-- ================= LOGIN ================= -->
<div class="box" id="loginBox">
  <h2>QIURSTORE.ID READY</h2>
  <p>Masukan kode yang admin kirimkan melalui WA</p>

  <input id="kodeInput" placeholder="Masukan kode">
  <button onclick="cekKode()">KIRIM</button>

  <p id="error"></p>
</div>

<!-- ================= DATA ================= -->
<div class="box hidden" id="dataBox">
  <p>
    Halo user,<br>
    kode ini hanya bisa dipakai <b>1x</b><br>
    dan akan hilang dalam <b>1 menit</b>
  </p>

  <div class="data">
    <p>Gmail:</p>
    <div id="gmail"></div>
    <button onclick="copyText('gmail')">COPY</button>

    <br><br>

    <p>Password:</p>
    <div id="password"></div>
    <button onclick="copyText('password')">COPY</button>
  </div>

  <p>Selamat bekerja, semangat!!</p>
</div>

<script>
/* ================= ABSEN (PERSISTENT) ================= */
const STORAGE_KEY = "absen_qiurstore";

/* tampilkan absen saat halaman dibuka */
window.onload = function () {
  loadAbsen();
};

function loadAbsen() {
  const list = document.getElementById("listAbsen");
  list.innerHTML = "";

  const data = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];

  data.forEach(item => {
    const div = document.createElement("div");
    div.className = "absen-item";
    div.innerText = item;
    list.appendChild(div);
  });
}

function kirimAbsen() {
  const nama = document.getElementById("namaWorker").value.trim();
  const status = document.getElementById("statusWorker").value.trim();

  if (!nama || !status) {
    alert("Nama & status wajib diisi");
    return;
  }

  const absenText = nama + " " + status;

  let data = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];
  data.push(absenText);
  localStorage.setItem(STORAGE_KEY, JSON.stringify(data));

  loadAbsen();

  document.getElementById("namaWorker").value = "";
  document.getElementById("statusWorker").value = "";
}

/* ================= LOGIN ================= */
const database = {
  "QiWd9": { gmail: "CelVip16", password: "QiurstoreID156" },
  "Qj5j9": { gmail: "CelVip17", password: "QiurstoreID156" },
  "Q6Rpe": { gmail: "CelVip18", password: "pass03" },
  "QzZ5t": { gmail: "CelVip19", password: "QiurstoreID156" },
  "Q1Rlf": { gmail: "CelVip20", password: "QiurstoreID156" }
};

function cekKode() {
  const kode = document.getElementById("kodeInput").value.trim();
  const error = document.getElementById("error");
  error.innerText = "";

  if (!database[kode]) {
    error.innerText = "❌ KODE TIDAK VALID";
    return;
  }

  let used = JSON.parse(localStorage.getItem("kodeTerpakai")) || [];
  if (used.includes(kode)) {
    error.innerText = "⚠️ KODE SUDAH DIGUNAKAN";
    return;
  }

  used.push(kode);
  localStorage.setItem("kodeTerpakai", JSON.stringify(used));

  document.getElementById("gmail").innerText = database[kode].gmail;
  document.getElementById("password").innerText = database[kode].password;

  document.getElementById("loginBox").classList.add("hidden");
  document.getElementById("dataBox").classList.remove("hidden");

  setTimeout(() => {
    document.getElementById("dataBox").innerHTML =
      "<h3 style='text-align:center'>WAKTU HABIS</h3><p style='text-align:center'>KODE TELAH KADALUARSA</p>";
  }, 60000);
}

function copyText(id) {
  navigator.clipboard.writeText(document.getElementById(id).innerText);
  alert("Tersalin ke clipboard");
}
</script>

</body>
</html>